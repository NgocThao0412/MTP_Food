<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../css/user-index.css">
     <link rel="stylesheet" href="../font/font-awesome-pro-v6-6.2.0/css/all.min.css" />

    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script> 
    
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.css" />
    <script type="text/javascript" src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.min.js"></script>

    <link rel="icon" href="../Img/favicon.png" type="image/x-icon" class="icon-page" />
    <title>MTP Food</title>
</head>

<body>
    <!-- Header -->
    <header>
        <div class="header-middle">
            <div class="container">
                <div class="header-middle-left">
                    <div class="header-logo">
                        <a href="">
                            <img src="../Img/mtp-food.png" alt="" class="header-logo-img">
                        </a>
                    </div>
                </div>

                <div class="header-middle-center">
                    <form action="" class="form-search">
                        <span class="search-btn">
                            <i class="fa-light fa-magnifying-glass"></i>
                        </span>
                        <input type="text" class="form-search-input" placeholder="T√¨m ki·∫øm m√≥n ƒÉn..."
                            oninput="searchProducts()">
                    </form>
                </div>

                <div class="header-middle-right">
                    <ul class="header-middle-right-list">
                        <li class="header-middle-right-item dnone open" onclick="openSearchMb()">
                            <div class="cart-icon-menu">
                                <i class="fa-light fa-magnifying-glass"></i>
                            </div>
                        </li>
                        <li class="header-middle-right-item close" onclick="closeSearchMb()">
                            <div class="cart-icon-menu">
                                <i class="fa-light fa-circle-xmark"></i>
                            </div>
                        </li>
                        <li class="header-middle-right-item dropdown open">
                            <i class="fa-light fa-user"></i>
                            <div class="auth-container">
                                <span class="text-dndk">ƒêƒÉng nh·∫≠p / ƒêƒÉng k√Ω</span>
                                <span class="text-tk">T√†i kho·∫£n <i class="fa-sharp fa-solid fa-caret-down"></i></span>
                            </div>
                            <ul class="header-middle-right-menu" id="userMenu">
                                <li><a id="login" href="javascript:;"><i class="fa-light fa-right-to-bracket"></i> ƒêƒÉng
                                        nh·∫≠p</a></li>
                                <li><a id="signup" href="javascript:;"><i class="fa-light fa-user-plus"></i> ƒêƒÉng
                                        k√Ω</a></li>
                            </ul>
                        </li>
                        <li class="header-middle-right-item open" onclick="openCart()">
                            <div class="cart-icon-menu">
                                <i class="fa-light fa-basket-shopping"></i>
                                <span class="count-product-cart">0</span>
                            </div>
                            <span>Gi·ªè h√†ng</span>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </header>

    <nav class="header-bottom">
        <div class="container">
            <ul class="menu-list">
                <li class="menu-list-item"><a href="" class="menu-link">Trang ch·ªß</a></li>
                <li class="menu-list-item" onclick="showCategory('M√≥n chay')"><a href="javascript:;" class="menu-link">M√≥n
                        chay</a></li>
                <li class="menu-list-item" onclick="showCategory('M√≥n m·∫∑n')"><a href="javascript:;" class="menu-link">M√≥n
                        m·∫∑n</a></li>
                <li class="menu-list-item" onclick="showCategory('M√≥n l·∫©u')"><a href="javascript:;" class="menu-link">M√≥n
                        l·∫©u</a></li>
                <li class="menu-list-item" onclick="showCategory('M√≥n ƒÉn v·∫∑t')"><a href="javascript:;" class="menu-link">M√≥n
                        ƒÉn v·∫∑t</a></li>
                <li class="menu-list-item" onclick="showCategory('M√≥n tr√°ng mi·ªáng')"><a href="javascript:;"
                        class="menu-link">M√≥n tr√°ng mi·ªáng</a></li>
                <li class="menu-list-item" onclick="showCategory('N∆∞·ªõc u·ªëng')"><a href="javascript:;" class="menu-link">N∆∞·ªõc
                        u·ªëng</a></li>
                <li class="menu-list-item" onclick="showCategory('M√≥n kh√°c')"><a href="javascript:;" class="menu-link">M√≥n
                        kh√°c</a></li>
            </ul>
        </div>
    </nav>

    <div class="advanced-search">
        <div class="container">
            <div class="advanced-search-category">
                <span>Ph√¢n lo·∫°i </span>
                <select name="" id="advanced-search-category-select" onchange="searchProducts()">
                    <option>T·∫•t c·∫£</option>
                    <option>M√≥n chay</option>
                    <option>M√≥n m·∫∑n</option>
                    <option>M√≥n l·∫©u</option>
                    <option>M√≥n ƒÉn v·∫∑t</option>
                    <option>M√≥n tr√°ng mi·ªáng</option>
                    <option>N∆∞·ªõc u·ªëng</option>
                    <option>M√≥n kh√°c</option>
                </select>
            </div>
        </div>
    </div>

    <main class="main-wrapper">
        <div class="container" id="trangchu">
            <div class="home-slider">
                <img src="../Img/banner-1.png" alt="">
                <!-- <img src="./Img/banner-2.png" alt=""> -->
            </div>

            <div class="home-service" id="home-service">
                <div class="home-service-item">
                    <div class="home-service-item-icon">
                        <i class="fa-light fa-person-carry-box"></i>
                    </div>
                    <div class="home-service-item-content">
                        <h4 class="home-service-item-content-h">GIAO H√ÄNG NHANH</h4>
                        <p class="home-service-item-content-desc">Cho t·∫•t c·∫£ ƒë∆°n h√†ng</p>
                    </div>
                </div>

                <div class="home-service-item">
                    <div class="home-service-item-icon">
                        <i class="fa-light fa-shield-heart"></i>
                    </div>
                    <div class="home-service-item-content">
                        <h4 class="home-service-item-content-h">S·∫¢N PH·∫®M AN TO√ÄN</h4>
                        <p class="home-service-item-content-desc">Cam k·∫øt ch·∫•t l∆∞·ª£ng</p>
                    </div>
                </div>

                <div class="home-service-item">
                    <div class="home-service-item-icon">
                        <i class="fa-light fa-headset"></i>
                    </div>
                    <div class="home-service-item-content">
                        <h4 class="home-service-item-content-h">H·ªñ TR·ª¢ 24/7</h4>
                        <p class="home-service-item-content-desc">T·∫•t c·∫£ ng√†y trong tu·∫ßn</p>
                    </div>
                </div>

                <div class="home-service-item">
                    <div class="home-service-item-icon">
                        <i class="fa-light fa-circle-dollar"></i>
                    </div>
                    <div class="home-service-item-content">
                        <h4 class="home-service-item-content-h">HO√ÄN L·∫†I TI·ªÄN</h4>
                        <p class="home-service-item-content-desc">N·∫øu kh√¥ng h√†i l√≤ng</p>
                    </div>
                </div>
            </div>

            <div class="home-title-block" id="home-title">
                <h2 class="home-title">Kh√°m ph√° th·ª±c ƒë∆°n c·ªßa ch√∫ng t√¥i</h2>
            </div>

            <div class="home-products" id="home-products"></div>

            <div class="page-nav">
                <ul class="page-nav-list"></ul>
            </div>
        </div>
    </main>
    <!-- ======================= -->
<!-- üßæ ƒê∆†N H√ÄNG ƒê√É MUA -->
<!-- ======================= -->
<section class="orders-section" id="ordersSection" style="display:none;">
  <div class="container">
    <div class="order-header">
      <h3>Qu·∫£n l√Ω ƒë∆°n h√†ng c·ªßa b·∫°n</h3>
      <p>Xem chi ti·∫øt, tr·∫°ng th√°i c·ªßa nh·ªØng ƒë∆°n h√†ng ƒë√£ ƒë·∫∑t.</p>
    </div>

    <div class="order-body">
      <div id="orderList" class="order-list">
        <div class="empty-order">
          <img src="../Img/empty-order.jpg" alt="empty order" class="empty-order-img">
          <p>Ch∆∞a c√≥ ƒë∆°n h√†ng n√†o</p>
        </div>
      </div>
    </div>
  </div>
</section>



    <!-- Th√¥ng tin t√†i kho·∫£n -->
<section class="account-section" id="accountSection" style="display:none;">
    
  <div class="container">
   <div class="account-container">
  <h3>Th√¥ng tin t√†i kho·∫£n c·ªßa b·∫°n</h3>
  <p>Qu·∫£n l√Ω th√¥ng tin ƒë·ªÉ b·∫£o m·∫≠t t√†i kho·∫£n</p>

 <div class="account-form">
  <!-- C·ªôt tr√°i -->
  <div class="account-left">
    <div class="form-group">
      <label for="infoname">H·ªç v√† t√™n</label>
      <input id="infoname" type="text" placeholder="Nh·∫≠p h·ªç v√† t√™n">
    </div>

    <div class="form-group">
      <label for="infophone">S·ªë ƒëi·ªán tho·∫°i</label>
      <input id="infophone" type="text" placeholder="Nh·∫≠p s·ªë ƒëi·ªán tho·∫°i">
    </div>

    <div class="form-group">
      <label for="infoemail">Email</label>
      <input id="infoemail" type="email" placeholder="Th√™m ƒë·ªãa ch·ªâ email c·ªßa b·∫°n">
    </div>

    <div class="form-group">
      <label for="infoaddress">ƒê·ªãa ch·ªâ</label>
      <input id="infoaddress" type="text" placeholder="Th√™m ƒë·ªãa ch·ªâ giao h√†ng c·ªßa b·∫°n">
    </div>

    <!-- N√∫t l∆∞u thay ƒë·ªïi -->
    <div class="account-buttons left-btn">
      <button class="btn-save" onclick="changeInformation()">
        <i class="fa fa-save"></i> L∆∞u thay ƒë·ªïi
      </button>
    </div>
  </div>

  <!-- C·ªôt ph·∫£i -->
  <div class="account-right">
    <div class="form-group">
      <label for="password-cur-info">M·∫≠t kh·∫©u hi·ªán t·∫°i</label>
      <input id="password-cur-info" type="password" placeholder="Nh·∫≠p m·∫≠t kh·∫©u hi·ªán t·∫°i">
    </div>

    <div class="form-group">
      <label for="password-after-info">M·∫≠t kh·∫©u m·ªõi</label>
      <input id="password-after-info" type="password" placeholder="Nh·∫≠p m·∫≠t kh·∫©u m·ªõi">
    </div>

    <div class="form-group">
      <label for="password-comfirm-info">X√°c nh·∫≠n m·∫≠t kh·∫©u m·ªõi</label>
      <input id="password-comfirm-info" type="password" placeholder="Nh·∫≠p l·∫°i m·∫≠t kh·∫©u m·ªõi">
      <div class="form-message password-after-comfirm-error"></div>
    </div>

    <!-- N√∫t ƒë·ªïi m·∫≠t kh·∫©u -->
    <div class="account-right">
      <button class="btn-password" onclick="changePassword()">
        <i class="fa fa-key"></i> ƒê·ªïi m·∫≠t kh·∫©u
      </button>
    </div>
  </div>
</div>

</section>

    
    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-top">
                <div class="footer-top-content">
                    <div class="footer-top-img">
                        <img src="../Img/mtp-food.png" alt="">
                    </div>

                    <div class="footer-top-subbox">
                        <div class="footer-top-subs">
                            <h2 class="footer-top-subs-title">ƒêƒÉng k√Ω nh·∫≠n tin</h2>
                            <p class="footer-top-subs-text">Nh·∫≠n th√¥ng tin m·ªõi nh·∫•t t·ª´ ch√∫ng t√¥i</p>
                        </div>

                        <form class="form-ground">
                            <input type="email" class="form-ground-input" placeholder="Nh·∫≠p email c·ªßa b·∫°n">
                            <button class="form-ground-btn">
                                <span>ƒêƒÇNG K√ù</span>
                                <i class="fa-solid fa-arrow-right"></i>
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <div class="widget-area">
            <div class="container">
                <div class="widget-row">
                    <div class="widget-row-col-1">
                        <h3 class="widget-title">V·ªÅ ch√∫ng t√¥i</h3>
                        <div class="widget-row-col-content">
                            <p>MTP Food l√† th∆∞∆°ng hi·ªáu ƒë∆∞·ª£c th√†nh l·∫≠p v√†o nƒÉm 2025 v·ªõi ti√™u ch√≠ ƒë·∫∑t ch·∫•t l∆∞·ª£ng s·∫£n ph·∫©m
                                l√™n h√†ng ƒë·∫ßu.</p>
                        </div>
                        <div class="widget-social">
                            <div class="widget-social-item">
                                <a href=""><i class="fab fa-facebook-f"></i></a>
                            </div>
                            <div class="widget-social-item">
                                <a href=""><i class="fab fa-twitter"></i></a>
                            </div>
                            <div class="widget-social-item">
                                <a href=""><i class="fab fa-linkedin-in"></i></a>
                            </div>
                            <div class="widget-social-item">
                                <a href=""><i class="fab fa-whatsapp"></i></a>
                            </div>
                        </div>
                    </div>

                    <div class="widget-row-col">
                        <h3 class="widget-title">Li√™n k·∫øt</h3>
                        <ul class="widget-contact">
                            <li class="widget-contact-item"><a href=""><i
                                        class="fa-regular fa-arrow-right"></i><span>V·ªÅ ch√∫ng t√¥i</span></a></li>
                            <li class="widget-contact-item"><a href=""><i
                                        class="fa-regular fa-arrow-right"></i><span>Th·ª±c ƒë∆°n</span></a></li>
                            <li class="widget-contact-item"><a href=""><i
                                        class="fa-regular fa-arrow-right"></i><span>ƒêi·ªÅu kho·∫£n</span></a></li>
                            <li class="widget-contact-item"><a href=""><i
                                        class="fa-regular fa-arrow-right"></i><span>Li√™n h·ªá</span></a></li>
                            <li class="widget-contact-item"><a href=""><i
                                        class="fa-regular fa-arrow-right"></i><span>Tin t·ª©c</span></a></li>
                        </ul>
                    </div>

                    <div class="widget-row-col">
                        <h3 class="widget-title">Th·ª±c ƒë∆°n</h3>
                        <ul class="widget-contact">
                            <li class="widget-contact-item"><a href=""><i
                                        class="fa-regular fa-arrow-right"></i><span>ƒêi·ªÉm t√¢m</span></a></li>
                            <li class="widget-contact-item"><a href=""><i
                                        class="fa-regular fa-arrow-right"></i><span>M√≥n chay</span></a></li>
                            <li class="widget-contact-item"><a href=""><i
                                        class="fa-regular fa-arrow-right"></i><span>M√≥n m·∫∑n</span></a></li>
                            <li class="widget-contact-item"><a href=""><i
                                        class="fa-regular fa-arrow-right"></i><span>N∆∞·ªõc u·ªëng</span></a></li>
                            <li class="widget-contact-item"><a href=""><i
                                        class="fa-regular fa-arrow-right"></i><span>Tr√°ng mi·ªáng</span></a></li>
                            <li class="widget-contact-item"><a href=""><i
                                        class="fa-regular fa-arrow-right"></i><span>M√≥n kh√°c</span></a></li>
                        </ul>
                    </div>

                    <div class="widget-row-col-1">
                        <h3 class="widget-title">Li√™n h·ªá</h3>
                        <div class="contact">
                            <div class="contact-item">
                                <div class="contact-item-icon">
                                    <i class="fa-regular fa-location-dot"></i>
                                </div>
                                <div class="contact-content">
                                    <span>273 An D∆∞∆°ng V∆∞∆°ng, Ph∆∞·ªùng Ch·ª£ Qu√°n, TP H·ªì Ch√≠ Minh</span>
                                </div>
                            </div>

                            <div class="contact-item">
                                <div class="contact-item-icon">
                                    <i class="fa-regular fa-phone"></i>
                                </div>
                                <div class="contact-content contact-item-phone">
                                    <span>0123 456 789</span><br>
                                    <span>0987 654 321</span>
                                </div>
                            </div>

                            <div class="contact-item">
                                <div class="contact-item-icon">
                                    <i class="fa-regular fa-envelope"></i>
                                </div>
                                <div class="contact-content conatct-item-email">
                                    <span>mtp@domain.com</span><br />
                                    <span>infomtp@domain.com</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <div class="copyright-wrap">
        <div class="container">
            <div class="copyright-content">
                <p>Copyright 2025 MTP Food. All Rights Reserved.</p>
            </div>
        </div>
    </div>

    <div class="back-to-top">
        <a href="#"><i class="fa-regular fa-arrow-up"></i></a>
    </div>

    <script>
document.addEventListener("DOMContentLoaded", function() {
  // ‚úÖ L·∫•y tr·∫°ng th√°i ƒëƒÉng nh·∫≠p
  const loggedIn = localStorage.getItem("loggedIn");
  const currentUser = JSON.parse(localStorage.getItem("currentUser"));

  const authContainer = document.querySelector(".auth-container");
  const menu = document.querySelector(".header-middle-right-menu");

  // ‚úÖ N·∫øu ƒë√£ ƒëƒÉng nh·∫≠p
  if (loggedIn === "true" && currentUser) {
    authContainer.innerHTML = `
      <span class="text-tk">Xin ch√†o,</span>
      <span class="text-tk">${currentUser.username}</b> <i class="fa-sharp fa-solid fa-caret-down"></i></span>
    `;

    menu.innerHTML = `
      <li><a href="javascript:;" id="logout"><i class="fa-light fa-right-from-bracket"></i> ƒêƒÉng xu·∫•t</a></li>
    `;
  }

  // ‚úÖ X·ª≠ l√Ω ƒëƒÉng xu·∫•t
  document.addEventListener("click", function(e) {
    if (e.target.id === "logout") {
      localStorage.removeItem("loggedIn");
      localStorage.removeItem("currentUser");
      alert("B·∫°n ƒë√£ ƒëƒÉng xu·∫•t!");
      window.location.reload();
    }
  });
});
    

document.addEventListener('DOMContentLoaded', function() {
    const userMenu = document.getElementById('userMenu');

    // L·∫•y user t·ª´ localStorage
    const userData = localStorage.getItem('currentUser');
    const isLoggedIn = localStorage.getItem('loggedIn') === 'true';

    if (userData && isLoggedIn) {
        const user = JSON.parse(userData);

        // Hi·ªÉn th·ªã t√™n ng∆∞·ªùi d√πng thay v√¨ n√∫t ƒêƒÉng nh·∫≠p/ƒêƒÉng k√Ω
       userMenu.innerHTML = `
  <li class="user-info" id="myAccount">
    <i class="fa-solid fa-user"></i>
    <span>T√†i kho·∫£n c·ªßa t√¥i</span>
  </li>
  <li class="user-info" id="myOrders">
    <i class="fa fa-shopping-bag"></i>
    <span>ƒê∆°n h√†ng ƒë√£ mua</span>
  </li>
  <li class="logoutBtn">
    <a href="javascript:;" id="logoutBtn">
      <i class="fa fa-sign-out-alt"></i>
      <span>ƒêƒÉng xu·∫•t</span>
    </a>
  </li>
`;

const accountSection = document.getElementById("accountSection");
const trangChu = document.getElementById("trangchu");
const myAccount = document.getElementById("myAccount");

if (myAccount) {
  myAccount.addEventListener("click", () => {
    // ·∫®n trang ch·ªß, hi·ªÉn th·ªã ph·∫ßn t√†i kho·∫£n
    if (trangChu) trangChu.style.display = "none";
    if (accountSection) accountSection.style.display = "block";

    // ‚è≥ ƒê·ª£i tr√¨nh duy·ªát render xong
    setTimeout(() => {
      const currentUser = JSON.parse(localStorage.getItem("currentUser"));
    
       // ‚úÖ ƒê·ª£i DOM hi·ªÉn th·ªã ƒë·∫ßy ƒë·ªß
    setTimeout(() => {
      const currentUser = JSON.parse(localStorage.getItem("currentUser"));
      if (!currentUser) return;
    
      const nameField = document.getElementById("infoname");
      const phoneField = document.getElementById("infophone");
      const emailField = document.getElementById("infoemail");
      const addressField = document.getElementById("infoaddress");

      if (currentUser && nameField && phoneField && emailField && addressField) {
        document.getElementById('infoname').value = currentUser.fullname || currentUser.username || "";
        phoneField.value = currentUser.phone || "";
        emailField.value = currentUser.email || "";
        addressField.value = currentUser.address || "";
      } else {
        console.warn("Kh√¥ng t√¨m th·∫•y th√¥ng tin ng∆∞·ªùi d√πng!");
      }
    }, 100); // 100ms ƒë·ªÉ DOM hi·ªÉn th·ªã ho√†n to√†n
  });
})

    
        // X·ª≠ l√Ω n√∫t ƒëƒÉng xu·∫•t
        const logoutBtn = document.getElementById('logoutBtn');
        logoutBtn.addEventListener('click', function(e) {
            e.preventDefault();
            localStorage.removeItem('loggedIn');
            localStorage.removeItem('UserStr');
            alert('ƒê√£ ƒëƒÉng xu·∫•t!');
            window.location.href = '../Home/login.html';
        });
    } else {
        // N·∫øu ch∆∞a ƒëƒÉng nh·∫≠p th√¨ gi·ªØ nguy√™n hai n√∫t ƒëƒÉng nh·∫≠p/ƒëƒÉng k√Ω
        const loginBtn = document.getElementById('login');
        const signupBtn = document.getElementById('signup');

        if (loginBtn) loginBtn.addEventListener('click', () => window.location.href = '../Home/login.html');
        if (signupBtn) signupBtn.addEventListener('click', () => window.location.href = '../Home/login.html');
    } }
// ==========================
// üëâ X·ª¨ L√ù CHUY·ªÇN GI·ªÆA C√ÅC PH·∫¶N USER
// ==========================
const myAccount = document.getElementById("myAccount");
const myOrders = document.getElementById("myOrders");
const trangChu = document.getElementById("trangchu");
const accountSection = document.getElementById("accountSection");
const ordersSection = document.getElementById("ordersSection");




// üîπ Khi b·∫•m ‚ÄúT√†i kho·∫£n c·ªßa t√¥i‚Äù
if (myAccount) {
  myAccount.addEventListener("click", () => {
    hideAllSections();
    accountSection.style.display = "block";

    const currentUser = JSON.parse(localStorage.getItem("currentUser"));
    if (!currentUser) return;

    document.getElementById("infoname").value = currentUser.fullname || currentUser.username || "";
    document.getElementById("infophone").value = currentUser.phone || "";
    document.getElementById("infoemail").value = currentUser.email || "";
    document.getElementById("infoaddress").value = currentUser.address || "";
  });
}
});
// ==========================
// üëâ C·∫¨P NH·∫¨T TH√îNG TIN T√ÄI KHO·∫¢N (Chu·∫©n h√≥a l∆∞u ƒë·ªìng b·ªô)
// ==========================
function changeInformation() {
  let accounts = JSON.parse(localStorage.getItem("accounts")) || [];
  let currentUser = JSON.parse(localStorage.getItem("currentUser"));

  if (!currentUser) {
    alert("Kh√¥ng t√¨m th·∫•y th√¥ng tin ng∆∞·ªùi d√πng!");
    return;
  }

  // L·∫•y th√¥ng tin t·ª´ form
  const name = document.getElementById("infoname").value.trim();
  const phone = document.getElementById("infophone").value.trim();
  const email = document.getElementById("infoemail").value.trim();
  const address = document.getElementById("infoaddress").value.trim();

  // Ki·ªÉm tra c∆° b·∫£n
  if (!phone.match(/^\d{9,11}$/)) {
    alert("S·ªë ƒëi·ªán tho·∫°i kh√¥ng h·ª£p l·ªá!");
    return;
  }

  // üîπ L∆∞u l·∫°i s·ªë ƒëi·ªán tho·∫°i c≈© ƒë·ªÉ t√¨m ƒë√∫ng t√†i kho·∫£n
  const oldPhone = currentUser.phone;

  // C·∫≠p nh·∫≠t currentUser
  currentUser.fullname = name || currentUser.fullname;
  currentUser.phone = phone || currentUser.phone;
  currentUser.email = email || currentUser.email;
  currentUser.address = address || currentUser.address;

  // üîπ C·∫≠p nh·∫≠t l·∫°i trong danh s√°ch accounts
  const index = accounts.findIndex(acc => acc.phone === oldPhone);
  if (index !== -1) {
    accounts[index] = currentUser; // c·∫≠p nh·∫≠t ƒë√∫ng t√†i kho·∫£n c≈©
  }

  // üîπ Ghi ƒë√® d·ªØ li·ªáu v√†o localStorage
  localStorage.setItem("accounts", JSON.stringify(accounts));
  localStorage.setItem("currentUser", JSON.stringify(currentUser));

  // üî• C·∫¨P NH·∫¨T PH·∫¶N HEADER NGAY KH√îNG C·∫¶N RELOAD
  const authContainer = document.querySelector(".auth-container");
  if (authContainer) {
    authContainer.innerHTML = `
      <span class="text-tk">Xin ch√†o,</span>
      <span class="text-tk">${currentUser.fullname || currentUser.username}
        <i class="fa-sharp fa-solid fa-caret-down"></i></span>
    `;
  }

  alert("‚úÖ Th√¥ng tin ƒë√£ ƒë∆∞·ª£c c·∫≠p nh·∫≠t th√†nh c√¥ng!");
}


// ==========================
// üëâ ƒê·ªîI M·∫¨T KH·∫®U
// ==========================
function changePassword() {
  const accounts = JSON.parse(localStorage.getItem("accounts")) || [];
  const currentUser = JSON.parse(localStorage.getItem("currentUser"));

  if (!currentUser) {
    alert("Kh√¥ng t√¨m th·∫•y t√†i kho·∫£n!");
    return;
  }

  const cur = document.getElementById("password-cur-info").value.trim();
  const newpw = document.getElementById("password-after-info").value.trim();
  const confirm = document.getElementById("password-comfirm-info").value.trim();

  if (!cur || !newpw || !confirm) {
    alert("Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin m·∫≠t kh·∫©u!");
    return;
  }

  if (cur !== currentUser.password) {
    alert("‚ùå M·∫≠t kh·∫©u hi·ªán t·∫°i kh√¥ng ƒë√∫ng!");
    return;
  }

  if (newpw.length < 6) {
    alert("M·∫≠t kh·∫©u m·ªõi ph·∫£i c√≥ √≠t nh·∫•t 6 k√Ω t·ª±!");
    return;
  }

  if (newpw !== confirm) {
    alert("M·∫≠t kh·∫©u x√°c nh·∫≠n kh√¥ng kh·ªõp!");
    return;
  }

  // C·∫≠p nh·∫≠t m·∫≠t kh·∫©u
  currentUser.password = newpw;
  const idx = accounts.findIndex(acc => acc.phone === currentUser.phone);
  if (idx !== -1) accounts[idx] = currentUser;

  localStorage.setItem("currentUser", JSON.stringify(currentUser));
  localStorage.setItem("accounts", JSON.stringify(accounts));

  alert("‚úÖ ƒê·ªïi m·∫≠t kh·∫©u th√†nh c√¥ng!");
  
  // X√≥a input m·∫≠t kh·∫©u
  document.getElementById("password-cur-info").value = "";
  document.getElementById("password-after-info").value = "";
  document.getElementById("password-comfirm-info").value = "";
}

// ==========================
// üëâ T·ª∞ ƒê·ªòNG HI·ªÇN TH·ªä D·ªÆ LI·ªÜU NG∆Ø·ªúI D√ôNG
// ==========================
document.addEventListener("DOMContentLoaded", () => {
  const currentUser = JSON.parse(localStorage.getItem("currentUser"));
  if (currentUser) {
    document.getElementById("infoname").value = currentUser.fullname || currentUser.username || "";
    document.getElementById("infophone").value = currentUser.phone || "";
    document.getElementById("infoemail").value = currentUser.email || "";
    document.getElementById("infoaddress").value = currentUser.address || "";
  }

  // üî• C·∫¨P NH·∫¨T HEADER KHI M·ªöI LOAD TRANG
  const authContainer = document.querySelector(".auth-container");
  if (authContainer) {
    authContainer.innerHTML = `
      <span class="text-tk">Xin ch√†o,</span>
      <span class="text-tk">${currentUser.fullname || currentUser.username}</b> 
        <i class="fa-sharp fa-solid fa-caret-down"></i></span>
    `;
  }

  const userMenu = document.getElementById("userMenu");
  if (userMenu) {
    const userText = document.querySelector(".text-tk b");
    if (userText) userText.textContent = currentUser.fullname || currentUser.username;
  }
});

// ================================
  // üëâ HI·ªÇN TH·ªä ƒê∆†N H√ÄNG C·ª¶A NG∆Ø·ªúI D√ôNG
  // ================================

  function hideAllSections() {
  const trangChu = document.getElementById("trangchu");
  const accountSection = document.getElementById("accountSection");
  const ordersSection = document.getElementById("ordersSection");
  if (trangChu) trangChu.style.display = "none";
  if (accountSection) accountSection.style.display = "none";
  if (ordersSection) ordersSection.style.display = "none";
}

function showUserOrders() {
  hideAllSections();

  const orderList = document.getElementById("orderList");
  const ordersSection = document.getElementById("ordersSection");
  const trangChu = document.getElementById("trangchu");
  const accountSection = document.getElementById("accountSection");

  if (trangChu) trangChu.style.display = "none";
  if (accountSection) accountSection.style.display = "none";
  if (ordersSection) ordersSection.style.display = "block";

  const currentUser = JSON.parse(localStorage.getItem("currentUser")) || {};
  const orders = JSON.parse(localStorage.getItem("orders")) || [];

  const userOrders = orders.filter(o => o.username === currentUser.username);

  if (userOrders.length === 0) {
    orderList.innerHTML = `
      <div class="empty-order">
        <img src="../Img/empty-order.jpg" alt="empty order" class="empty-order-img">
        <p>Ch∆∞a c√≥ ƒë∆°n h√†ng n√†o</p>
      </div>`;
    return;
  }

  orderList.innerHTML = userOrders.map(o => `
    <div class="order-item" style="border:1px solid #ddd; padding:15px; margin-bottom:15px; border-radius:8px;">
      <h4>üßæ ƒê∆°n h√†ng #${o.id}</h4>
      <p><b>Ng√†y ƒë·∫∑t:</b> ${o.date}</p>
      <p><b>T·ªïng ti·ªÅn:</b> ${Number(o.total).toLocaleString()}ƒë</p>
      <p><b>Tr·∫°ng th√°i:</b> ${o.status}</p>
      <ul style="margin-top:10px;">
        ${o.items.map(i => `<li>${i.name} x${i.qty}</li>`).join("")}
      </ul>
    </div>
  `).join("");
}

document.addEventListener("DOMContentLoaded", () => {
  const myOrders = document.getElementById("myOrders");
  if (myOrders) myOrders.addEventListener("click", showUserOrders);
});



</script>
    
    
<script src="../js/user-index.js"></script>
    
</body>

</html>
